Support case-insentive matching with and without regexes enabled.

Implement smart case.

Convert to use string types consistently--lazy byte strings for files,
strict byte strings for lines.